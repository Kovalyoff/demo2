#!groovy

import groovy.io.FileType
import hudson.FilePath
import hudson.*

def folderName = 'Demo2'
def giturl = 'http://172.31.114.190/root/jenkins.git'

folder(folderName) {
    displayName('Demo2')
    description('Folder for Demo2')
}

pipelineJob("${folderName}/${folderName}-pipeline") {
    definition {
        cps {
            script(readFileFromWorkspace('jenkinsfile'))
            sandbox()
        }
    }
}


job("${folderName}/test") {
    logRotator(-1, 10)
    scm {
            git {
                remote {
                    url(giturl)
                }
            }
        }
    triggers {
        // githubPush()
        scm('H/2 * * * *')
    }
    steps{
        shell "echo 'Hello'"
        //shell "pylint '/var/lib/jenkins/workspace/Demo2/test/hello.py' || exit 0"
        //shell "cp '/var/lib/jenkins/workspace/Demo2/test/hello.py' /var/lib/jenkins/workspace/Demo2/build/"
    }
}

job("${folderName}/build") {
    logRotator(-1, 10)
    triggers {
        // githubPush()
        scm('H/2 * * * *')
    }
    steps{
       // shell "cp /var/lib/jenkins/workspace/Demo2/build/hello.py /var/lib/jenkins/workspace/Demo2/deploy/"
    }
}

job("${folderName}/deploy") {
    logRotator(-1, 10)
      steps{
          shell "echo 'Hello'"
           // shell 'sh /home/user/copy.sh'
    }
    triggers {
        // githubPush()
        scm('H/2 * * * *')
    }
}
